(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{1384:function(t,e,n){var content=n(1410);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(36).default)("659d1779",content,!0,{sourceMap:!1})},1385:function(t,e,n){var content=n(1412);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(36).default)("2a8ec1bd",content,!0,{sourceMap:!1})},1386:function(t,e,n){var content=n(1414);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(36).default)("5cf224cd",content,!0,{sourceMap:!1})},1405:function(t,e,n){"use strict";n.r(e);var r=n(742),o=n(1342),c=n(1351),l=n(503),d=n(393),m=n(508),h=n(304),f=n(509),x=n(92),_=n(516),v=n(1341),w=n(128),k=n(1340),C=n(1286),y=(n(48),n(321),n(58),n(19),n(12),n(179),n(530)),T=n(1368),$={data:function(){return{search:""}},computed:{selectTokenDialog:{get:function(){return this.$store.state.selectTokenDialog},set:function(t){this.$store.commit("toggleSelectToken",t)}},selectedToken:{get:function(){return this.$store.state.toToken},set:function(t){this.$store.commit("setToToken",t);var e=T.filter((function(e){return e.asset_id.match(t.chain_id)}))[0];this.$store.commit("setToNetwork",e),this.selectTokenDialog=!1}},assets:function(){return y.assets},filteredItems:function(){var t=this;return this.assets.filter((function(e){return e.symbol.toLowerCase().match(t.search)||e.name.toLowerCase().match(t.search)||e.asset_id.toLowerCase().match(t.search)}))}}},D=(n(1409),n(69)),component=Object(D.a)($,(function(){var t=this,e=t._self._c;return e(c.a,{staticClass:"dialog-css",attrs:{"max-width":"400px","overlay-opacity":"0.95"},model:{value:t.selectTokenDialog,callback:function(e){t.selectTokenDialog=e},expression:"selectTokenDialog"}},[e(w.a,{staticClass:"align-self-start px-9 pt-8"},[e(v.a,{staticClass:"d-flex flex-column mb-0"},[e(o.a,{staticClass:"align-center d-flex flex-row pr-0"},[e("h1",{staticClass:"select-token-css"},[t._v(t._s(t.$t("select_token")))]),t._v(" "),e(k.a),t._v(" "),e(r.a,{attrs:{icon:""},on:{click:function(e){t.selectTokenDialog=!1}}},[e(l.a,[t._v(" mdi-close ")])],1)],1),t._v(" "),e(o.a,{staticClass:"pt-4 px-2"},[e(C.a,{staticClass:"search-border search-bg",attrs:{dense:"",outlined:"","hide-details":"true","prepend-inner-icon":"mdi-magnify",placeholder:t.$t("search_token_name")},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),t._v(" "),e(o.a,{staticClass:"pt-2 px-0"},[e(m.a,{staticClass:"overflow-y-auto",attrs:{height:"450px"}},[e(_.a,t._l(t.filteredItems,(function(n,i){return e(h.a,{key:i,staticClass:"px-2",staticStyle:{"border-radius":"10px"},on:{click:function(e){t.selectedToken=n}}},[e(f.a,[e(d.a,{attrs:{src:n.icon_url}})],1),t._v(" "),e(x.a,[e(x.c,{staticClass:"font-weight-bold",staticStyle:{"font-size":"14px"}},[t._v("\n                  "+t._s(n.symbol)+"\n                ")]),t._v(" "),e(x.b,{staticStyle:{"font-size":"12px"}},[t._v("\n                  "+t._s(n.name)+"\n                ")])],1)],1)})),1)],1)],1)],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports},1406:function(t,e,n){"use strict";n.r(e);var r=n(742),o=n(1342),c=n(1351),l=n(503),d=n(393),m=n(508),h=n(304),f=n(509),x=n(92),_=n(516),v=n(1341),w=n(128),k=n(1340),C=n(1286),y=(n(48),n(321),n(58),n(19),n(12),n(179),n(1368)),T={data:function(){return{search:""}},computed:{selectNetworkDialog:{get:function(){return this.$store.state.selectNetworkDialog},set:function(t){this.$store.commit("toggleSelectNetwork",t)}},selectedNetwork:{get:function(){return this.$store.state.toNetwork},set:function(t){this.$store.commit("setToNetwork",t),this.selectNetworkDialog=!1}},selectedToken:{get:function(){return this.$store.state.toToken}},chains:{get:function(){return y}},filteredItems:function(){var t=this;return this.chains.filter((function(e){if(e.asset_id.match(t.selectedToken.chain_id)||"c94ac88f-4671-3976-b60a-09064f1811e8"==e.asset_id)return e.symbol.toLowerCase().match(t.search)||e.name.toLowerCase().match(t.search)||e.asset_id.toLowerCase().match(t.search)}))}},mounted:function(){this.selectedNetwork=this.filteredItems[0]}},$=(n(1411),n(69)),component=Object($.a)(T,(function(){var t=this,e=t._self._c;return e(c.a,{staticClass:"dialog-css",attrs:{"max-width":"400px","overlay-opacity":"0.95"},model:{value:t.selectNetworkDialog,callback:function(e){t.selectNetworkDialog=e},expression:"selectNetworkDialog"}},[e(w.a,{staticClass:"align-self-start px-9 pt-8"},[e(v.a,{staticClass:"d-flex flex-column mb-0"},[e(o.a,{staticClass:"align-center d-flex flex-row pr-0"},[e("h1",{staticClass:"select-network-css"},[t._v(t._s(t.$t("select_network")))]),t._v(" "),e(k.a),t._v(" "),e(r.a,{attrs:{icon:""},on:{click:function(e){t.selectNetworkDialog=!1}}},[e(l.a,[t._v(" mdi-close ")])],1)],1),t._v(" "),e(o.a,{staticClass:"pt-4 px-2"},[e(C.a,{staticClass:"search-border search-bg",attrs:{dense:"",outlined:"","hide-details":"true","prepend-inner-icon":"mdi-magnify",placeholder:t.$t("search_network_name")},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),t._v(" "),e(o.a,{staticClass:"pt-2 px-0"},[e(m.a,{staticClass:"overflow-y-auto",attrs:{height:"450px"}},[e(_.a,t._l(t.filteredItems,(function(n,i){return e(h.a,{key:i,staticClass:"px-2",staticStyle:{"border-radius":"10px"},on:{click:function(e){t.selectedNetwork=n}}},[e(f.a,[e(d.a,{attrs:{src:n.icon_url}})],1),t._v(" "),e(x.a,[e(x.c,{staticClass:"font-weight-bold",staticStyle:{"font-size":"14px"}},[t._v(" "+t._s(n.name)+" ")]),t._v(" "),e(x.b,{staticStyle:{"font-size":"12px"}},[t._v("  "+t._s(n.symbol)+" ")])],1)],1)})),1)],1)],1)],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports},1407:function(t,e,n){"use strict";n.r(e);var r=n(742),o=n(1342),c=n(1351),l=n(503),d=n(393),m=n(1341),h=n(128),f=n(1340),x=n(1286),_=(n(58),n(23)),v=(n(111),n(70),n(93),n(141),n(790),n(50),n(63)),w=n(2099),k=n(527),C=n(160),y=n(533),T=n(534),$=n(1389),D=n.n($),S=n(394),N=n(528),A=n(1372),F="c94ac88f-4671-3976-b60a-09064f1811e8",E="43d61dcd-e413-450d-80b8-101d5e903357",M="https://scan.mvm.dev/";function W(t,e){return e===E?v.a.utils.parseEther(Number(t).toFixed(8)):Object(w.c)(Object(w.b)(t,N.a))}var B={components:{txConfirmed:A.default},data:function(){return{MetamaskLogo:D.a,search:"",txAddress:"",txMemo:"",txType1Sent:!1,txType2Sent:!1,txConfirmed:!1,txSucceed:!1,txExplorerURL:"",txErrorText:""}},props:["toAmount","totalAmount","fee"],computed:{confirmWithdrawDialog:{get:function(){return this.$store.state.confirmWithdrawDialog},set:function(t){this.$store.commit("toggleConfirmWithdraw",t)}},txSucceedDialog:{get:function(){return this.$store.state.txSucceedDialog},set:function(t){this.$store.commit("toggleTxSucceedDialog",t)}},txFailedDialog:{get:function(){return this.$store.state.txFailedDialog},set:function(t){this.$store.commit("toggleTxFailedDialog",t)}},selectedNetwork:{get:function(){return this.$store.state.toNetwork}},selectedToken:{get:function(){return this.$store.state.toToken}},userAddress:function(){return this.$store.state.userAddress},txSupportMetamask:function(){return this.$store.state.supportMetamaskNetworks.includes(this.selectedNetwork.symbol)},txToMixin:function(){return this.selectedNetwork.asset_id===F},inputPlaceHolder:function(){return[this.txToMixin?this.$t("please_enter_recipient_user_id"):this.$t("please_enter_your_wallet_address"),this.$t("optional")]}},methods:{withdraw:function(t){var e=this;return Object(_.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,e.selectedNetwork.asset_id!=F){n.next=9;break}return e.txType1Sent=!0,n.next=5,e.mixinWithdraw();case 5:return e.txType1Sent=!1,e.confirmWithdrawDialog=!1,e.txSucceedDialog=!0,n.abrupt("return");case 9:if("metamask"!=t){n.next=17;break}return e.txType2Sent=!0,n.next=13,e.externalWithdraw("metamask");case 13:return e.txType2Sent=!1,e.confirmWithdrawDialog=!1,e.txSucceedDialog=!0,n.abrupt("return");case 17:return e.txType1Sent=!0,n.next=20,e.externalWithdraw("");case 20:e.txType1Sent=!1,e.confirmWithdrawDialog=!1,e.txSucceedDialog=!0,n.next=33;break;case 25:n.prev=25,n.t0=n.catch(0),console.log(n.t0),e.txType1Sent=!1,e.txType2Sent=!1,e.confirmWithdrawDialog=!1,e.txErrorText=n.t0,e.txFailedDialog=!0;case 33:case"end":return n.stop()}}),n,null,[[0,25]])})))()},mixinWithdraw:function(){var t=this;return Object(_.a)(regeneratorRuntime.mark((function e(){var n,r,o,c,l,d,m,h,f,x,_;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(C.b)(),r=n.connectedWallet,o=new v.a.providers.Web3Provider(r.value.provider,"any"),c=o.getSigner(),e.next=5,t.getMixinExtra(t.txAddress,t.txMemo);case 5:if(void 0!==(l=e.sent)){e.next=8;break}throw new Error("Failed to get Mixin user");case 8:return d=W(t.toAmount,t.selectedToken.asset_id),e.next=11,Object(N.f)(t.userAddress);case 11:if(m=e.sent,t.selectedToken.asset_id!==E){e.next=19;break}return f=new v.a.Contract(N.b,T,c),e.next=16,f.release(m,l,{value:d,gasPrice:1e7,gasLimit:35e4});case 16:h=e.sent,e.next=26;break;case 19:return e.next=21,Object(N.d)(t.selectedToken.asset_id);case 21:return x=e.sent,_=new v.a.Contract(x,y,c),e.next=25,_.transferWithExtra(m,d,l,{gasPrice:1e7});case 25:h=e.sent;case 26:t.txExplorerURL=M+"tx/"+h.hash;case 27:case"end":return e.stop()}}),e)})))()},externalWithdraw:function(t){var e=this;return Object(_.a)(regeneratorRuntime.mark((function n(){var r,o,c,l,d,m,h,f,x,_,w,k;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=Object(C.b)(),o=r.connectedWallet,c=new v.a.providers.Web3Provider(o.value.provider,"any"),l=c.getSigner(),"metamask"!=t){n.next=9;break}return n.next=6,l.getAddress();case 6:n.t0=n.sent,n.next=10;break;case 9:n.t0=e.txAddress;case 10:return d=n.t0,n.next=13,e.getExternalExtra(d,e.txMemo,e.toAmount);case 13:return m=n.sent,h=W(e.totalAmount,e.selectedToken.asset_id),n.next=17,Object(N.f)(e.userAddress);case 17:if(f=n.sent,e.selectedToken.asset_id!==E){n.next=27;break}return _=new v.a.Contract(N.b,T,l),n.next=22,_.release(f,m,{value:h,gasPrice:1e7,gasLimit:35e4});case 22:x=n.sent,console.log(x),e.txExplorerURL=M+"tx/"+x.hash,n.next=36;break;case 27:return n.next=29,Object(N.d)(e.selectedToken.asset_id);case 29:return w=n.sent,k=new v.a.Contract(w,y,l),n.next=33,k.transferWithExtra(f,h,m,{gasPrice:1e7});case 33:x=n.sent,console.log(x),e.txExplorerURL=M+"tx/"+x.hash;case 36:case"end":return n.stop()}}),n)})))()},getMixinExtra:function(t,e){return Object(_.a)(regeneratorRuntime.mark((function n(){var r,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=String(t).trim(),Object(S.a)(r)){n.next=7;break}return n.next=4,k.a.user.fetch(r);case 4:o=n.sent,console.log(o),r=o.user_id;case 7:if(void 0!==r){n.next=9;break}return n.abrupt("return",void 0);case 9:return n.abrupt("return","0x"+Object(N.e)(r,e));case 10:case"end":return n.stop()}}),n)})))()},getExternalExtra:function(t,e,n){var r=this;return Object(_.a)(regeneratorRuntime.mark((function o(){var c,l,d;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return c=JSON.stringify({t:t,m:e,a:n}),l={receivers:["a13f4c77-5cfc-4368-a2d6-33f07037ae9e"],threshold:1,extra:btoa(c)},console.log(l,c),o.next=5,r.$axios.post("https://bridge.mvm.dev/extra",l);case 5:return d=o.sent,o.abrupt("return","0x"+d.data.extra);case 7:case"end":return o.stop()}}),o)})))()}}},O=(n(1413),n(69)),component=Object(O.a)(B,(function(){var t=this,e=t._self._c;return e(c.a,{staticClass:"dialog-css",attrs:{"max-width":"500px","overlay-opacity":"0.95"},model:{value:t.confirmWithdrawDialog,callback:function(e){t.confirmWithdrawDialog=e},expression:"confirmWithdrawDialog"}},[e(h.a,{staticClass:"align-self-start px-9 py-8"},[e(m.a,{staticClass:"d-flex flex-column mb-0"},[e(o.a,{staticClass:"align-center d-flex flex-row pr-0 mb-2"},[e("h1",{staticClass:"title-css"},[t._v(t._s(t.$t("confirm_withdraw")))]),t._v(" "),e(f.a),t._v(" "),e(r.a,{attrs:{icon:""},on:{click:function(e){t.confirmWithdrawDialog=!1}}},[e(l.a,[t._v(" mdi-close ")])],1)],1),t._v(" "),e(o.a,[e("div",{staticClass:"py-0"},[e("div",[e("span",{staticClass:"subtitle-css"},[t._v(" "+t._s(t.$t("to"))+" ")]),t._v(" "),e("div",{staticClass:"d-flex flex-row align-center pt-1 mb-5"},[e(d.a,{staticClass:"mr-2",attrs:{src:t.selectedNetwork.icon_url,"max-height":"20px","max-width":"20px"}}),t._v(" "),e("span",{staticClass:"main-title-css"},[t._v("\n                "+t._s(t.selectedNetwork.name)+" "+t._s(t.$t("mainnet"))+"\n              ")])],1)])]),t._v(" "),e("div",{staticClass:"py-0"},[e("div",[e("span",{staticClass:"subtitle-css"},[t._v(" "+t._s(t.$t("token"))+" ")]),t._v(" "),e("div",{staticClass:"d-flex flex-row align-center pt-1 mb-5"},[e(d.a,{staticClass:"mr-2",attrs:{src:t.selectedToken.icon_url,"max-height":"20px","max-width":"20px"}}),t._v(" "),e("span",{staticClass:"main-title-css"},[t._v("\n                "+t._s(t.totalAmount)+" "+t._s(t.selectedToken.symbol)+"\n              ")])],1)])]),t._v(" "),t.txToMixin?e("div",{staticClass:"d-flex flex-column mb-2"},[e("span",{staticClass:"subtitle-css"},[t._v("\n            "+t._s(t.$t("user_id"))+"\n          ")]),t._v(" "),e(x.a,{staticClass:"my-3 withdraw-addr",attrs:{rounded:"",clearable:"","hide-details":"true",placeholder:t.inputPlaceHolder[0]},model:{value:t.txAddress,callback:function(e){t.txAddress=e},expression:"txAddress"}}),t._v(" "),e("span",{staticClass:"subtitle-css"},[t._v(" "+t._s(t.$t("memo"))+" ")]),t._v(" "),e(x.a,{staticClass:"my-3 withdraw-addr",attrs:{rounded:"",clearable:"","hide-details":"true",placeholder:t.inputPlaceHolder[1]},model:{value:t.txMemo,callback:function(e){t.txMemo=e},expression:"txMemo"}})],1):e("div",{staticClass:"d-flex flex-column mb-2"},[e("span",{staticClass:"subtitle-css"},[t._v("\n            "+t._s(t.$t("address"))+"\n          ")]),t._v(" "),e(x.a,{staticClass:"my-3 withdraw-addr",attrs:{rounded:"",clearable:"","hide-details":"true",placeholder:t.inputPlaceHolder[0]},model:{value:t.txAddress,callback:function(e){t.txAddress=e},expression:"txAddress"}}),t._v(" "),e("span",{staticClass:"subtitle-css"},[t._v(" "+t._s(t.$t("memo"))+" ")]),t._v(" "),e(x.a,{staticClass:"my-3 withdraw-addr",attrs:{rounded:"",clearable:"","hide-details":"true",placeholder:t.inputPlaceHolder[1]},model:{value:t.txMemo,callback:function(e){t.txMemo=e},expression:"txMemo"}})],1)]),t._v(" "),e(o.a,[e(r.a,{staticClass:"deposit-btn mt-2",attrs:{block:"","x-large":"",elevation:"0",loading:t.txType1Sent},on:{click:t.withdraw}},[t.txToMixin?e("span",[t._v(" "+t._s(t.$t("withdraw_to_mixin")))]):e("span",[t._v(" "+t._s(t.$t("withdraw_to_address")))])]),t._v(" "),t.txSupportMetamask?e(r.a,{staticClass:"metamask-pay-btn mt-4",attrs:{block:"","x-large":"",elevation:"0",loading:t.txType2Sent},on:{click:function(e){return t.withdraw("metamask")}}},[e("span",{staticClass:"ml-1"},[t._v(" "+t._s(t.$t("withdraw_to_current_wallet")))])]):t._e()],1)],1),t._v(" "),e("tx-confirmed",{attrs:{link:t.txExplorerURL}}),t._v(" "),e("tx-failed",{attrs:{msg:t.txErrorText}})],1)],1)}),[],!1,null,"1cf79746",null);e.default=component.exports;installComponents(component,{TxConfirmed:n(1372).default,TxFailed:n(1383).default})},1409:function(t,e,n){"use strict";n(1384)},1410:function(t,e,n){var r=n(35)(!1);r.push([t.i,".search-border{border-radius:10px!important}.select-token-css{font-size:20px;font-style:italic}",""]),t.exports=r},1411:function(t,e,n){"use strict";n(1385)},1412:function(t,e,n){var r=n(35)(!1);r.push([t.i,".search-border{border-radius:10px!important}.select-network-css{font-size:20px;font-style:italic}",""]),t.exports=r},1413:function(t,e,n){"use strict";n(1386)},1414:function(t,e,n){var r=n(35)(!1);r.push([t.i,".dialog-css[data-v-1cf79746]{width:400px;max-width:400px;min-height:64px}.title-css[data-v-1cf79746]{font-size:24px;font-weight:600;font-style:italic}.subtitle-css[data-v-1cf79746]{font-size:14px;font-weight:400}.main-title-css[data-v-1cf79746]{font-size:18px;font-weight:500;word-break:break-all}.deposit-btn[data-v-1cf79746]{color:#fff!important;font-weight:600;background-color:#5959d8!important}.deposit-btn[data-v-1cf79746],.qr-area[data-v-1cf79746]{border-radius:10px!important}.qr-area[data-v-1cf79746]{background-color:#f4f7fa}.help-text[data-v-1cf79746]{word-wrap:break-word}.withdraw-addr[data-v-1cf79746]{height:55px;border-radius:10px;background-color:#f4f7fa}.metamask-pay-btn[data-v-1cf79746]{color:#fff;font-weight:600;background-color:#2979ff!important;border-radius:10px}",""]),t.exports=r},1673:function(t,e,n){"use strict";n.r(e);var r=n(742),o=n(1342),c=n(2066),l=n(503),d=n(393),m=n(502),h=n(1341),f=n(128),x=n(1286),_=(n(58),n(63)),v=n(322),w=n.n(v),k=n(530),C=n(1368),y=n(533),T=n(527),$=n(160),D=n(528),S=n(1405),N=n(224),A=n(1407),F=n(1406);const E="c94ac88f-4671-3976-b60a-09064f1811e8",M="43d61dcd-e413-450d-80b8-101d5e903357";function W(t){return t<=0?t:Math.floor(1e8*Number(t))/1e8}var B={components:{selectToToken:S.default,ConnectWallet:N.default,withdrawDialog:A.default,selectToNetowrk:F.default},head(){return{title:this.$t("withdraw_token")}},data:()=>({bridge:w.a,toAmount:0,toBalance:"",toBalanceVisble:!1,fetchingBalance:!1,withdrawing:!1,txEstimatedFee:0,txGettingFee:!1,txEstimatedFeeVisible:!1,txFeeAssetBalance:"",valueValid:!1,rules:[t=>t>=0||"Invalid Amount"]}),computed:{mode:{get(){return this.$store.state.mode},set(t){this.$store.commit("setMode",t)}},assets:()=>k.assets,connected(){return this.$store.state.connected},connectedChain(){return this.$store.state.chainId},selectedNetwork(){return this.$store.state.toNetwork},selectedToken(){return this.$store.state.toToken},fixedToBalance(){return W(this.toBalance).toLocaleString("en-US",{maximumFractionDigits:8,minimumFractionDigits:2})},totalPayAmount(){return(Number(this.toAmount)+Number(this.txEstimatedFee)).toLocaleString("en-US",{maximumFractionDigits:8,minimumFractionDigits:0})},maxPayAmount(){let a=W(Number(this.toBalance)-Number(this.txEstimatedFee));return a<=0?this.toBalance.toLocaleString("en-US",{maximumFractionDigits:8,minimumFractionDigits:2}).replaceAll(",",""):this.selectedNetwork.asset_id==E?a.toLocaleString("en-US",{maximumFractionDigits:8,minimumFractionDigits:2}).replaceAll(",",""):a.toLocaleString("en-US",{maximumFractionDigits:4,minimumFractionDigits:2}).replaceAll(",","")},selectNetworkDialog:{get(){return this.$store.state.selectNetworkDialog},set(t){this.$store.commit("toggleSelectNetwork",t)}},selectTokenDialog:{get(){return this.$store.state.selectTokenDialog},set(t){this.$store.commit("toggleSelectToken",t)}},connectWalletDialog:{get(){return this.$store.state.connectWalletDialog},set(t){this.$store.commit("toggleConnectWallet",t)}},confirmWithdrawDialog:{get(){return this.$store.state.confirmWithdrawDialog},set(t){this.$store.commit("toggleConfirmWithdraw",t)}},networkCorrect:{get(){return"0x120c7"===this.connectedChain}},withdrawBtnText:{get(){try{this.$refs.form.validate()}catch(t){}return this.valueValid=!1,this.networkCorrect?this.toAmount<=0?this.$t("invalid_amount"):Number(this.toAmount)+Number(this.txEstimatedFee)>Number(this.toBalance)?this.$t("insufficient_balance"):this.selectedNetwork.asset_id!=E&&1e4*Number(this.toAmount)<1?this.$t("minimum_amount"):(this.valueValid=!0,this.$t("withdraw")):`${this.$t("please_switch_to")} ${this.$t("mvm_mainnet")}`}},transactionGas:{get(){return this.selectedToken.asset_id===M?35e-7:16e-7}}},watch:{async selectedToken(){this.getMvmtoBalance(),await this.estimateTxFee(),this.connected&&this.$nextTick((()=>{try{this.$refs.form.validate()}catch(t){console.log(t)}}))},async selectedNetwork(){await this.estimateTxFee(),this.connected&&this.$nextTick((()=>{try{this.$refs.form.validate()}catch(t){console.log(t)}}))},txGettingFee(t,e){this.valueValid=!1},connectedChain(){this.getMvmtoBalance()}},mounted(){this.getMvmtoBalance(),this.estimateTxFee(),this.setDefaultToNetwork(),this.mvmBydefault()},methods:{async withdraw(){this.mvmBydefault(),this.confirmWithdrawDialog=!0,this.withdrawing=!0,this.withdrawing=!1},async getMvmtoBalance(){if(!this.connected)return;this.fetchingBalance=!0,this.toBalanceVisble=!1;const{connectedWallet:t}=Object($.b)(),e=new _.a.providers.Web3Provider(t.value.provider,"any");let n=e.getSigner(),r=await n.getAddress();if(this.selectedToken.asset_id===M){let t=_.a.utils.getAddress(r),n=_.a.utils.formatEther(await e.getBalance(t));return this.toBalance=n,this.toBalanceVisble=!0,void(this.fetchingBalance=!1)}try{let t=await Object(D.c)(this.selectedToken.asset_id),n=new _.a.Contract(t,y,e),o=await n.balanceOf(r),c=_.a.utils.formatUnits(o,8);this.toBalance=c,this.toBalanceVisble=!0,this.fetchingBalance=!1}catch(t){console.log(t,this.selectedToken.asset_id),this.toBalanceVisble=!1,this.fetchingBalance=!1}},setDefaultToNetwork(){let t=this.assets[0];this.$store.commit("setToToken",t);let e=C.filter((e=>e.asset_id.match(t.chain_id)))[0];this.$store.commit("setToNetwork",e)},async mvmBydefault(){const{connectedWallet:t,setChain:e}=Object($.b)();t&&e({wallet:t.value.label,chainId:"0x120c7"})},async estimateTxFee(){if(this.txGettingFee=!0,this.txEstimatedFeeVisible=!1,this.selectedNetwork.asset_id==E)return this.txEstimatedFee=0,this.txGettingFee=!1,void(this.txEstimatedFeeVisible=!1);try{this.txEstimatedFee=await this.getTxFee()}catch(t){console.log(t)}if(this.selectedNetwork.asset_id==E)return this.txEstimatedFee=0,this.txGettingFee=!1,void(this.txEstimatedFeeVisible=!1);this.txGettingFee=!1,this.txEstimatedFeeVisible=!0},async getTxFee(){if(this.selectedNetwork.asset_id===E)return 0;if(void 0===this.selectedToken.asset_id)return 0;let t=await T.a.network.fetchAsset(this.selectedToken.asset_id);return this.selectedToken.asset_id===this.selectedToken.chain_id?t.fee:await this.get4swapPrice(this.selectedToken.asset_id,this.selectedToken.chain_id,t.fee)},async get4swapPrice(t,e,n){const r=(Number(n)+.01*Number(n)).toLocaleString();if("NaN"==r)return 0;let o=await this.$axios.post("https://api.4swap.org/api/orders/pre",{pay_asset_id:t,fill_asset_id:e,amount:r});if(null!=o.data){let t=o.data.data.pay_amount;return 1e4*Number(t)>1?Math.ceil(1e4*t)/1e4:Number(t)}return 0},setMaxAmount(){this.toAmount=this.maxPayAmount}}},O=n(69),component=Object(O.a)(B,(function(){var t=this,e=t._self._c;return e(h.a,{staticClass:"justify-center align-self-start",attrs:{"no-gutters":""}},[e(f.a,{staticClass:"pa-9 mt-15 border-rounded",attrs:{elevation:"2","max-width":"552px"}},[e(h.a,{staticClass:"d-flex flex-column",attrs:{"no-gutters":""}},[e(o.a,{staticClass:"mb-6 px-0",staticStyle:{"font-size":"24px"}},[e("a",{staticStyle:{color:"#68778d","text-decoration":"none"},on:{click:function(e){t.mode=0}}},[e("span",[t._v(" "+t._s(t.$t("deposit"))+" ")])]),t._v(" "),e("a",{staticClass:"pl-6 font-weight-bold"},[e("span",[t._v(" "+t._s(t.$t("withdraw"))+" ")])])]),t._v(" "),e(o.a,{staticClass:"pa-0",staticStyle:{"font-size":"14px"}},[e(f.a,{staticClass:"px-5 py-4 border-rounded",staticStyle:{"background-color":"#f4f7fa"}},[e("div",{staticClass:"d-flex align-center"},[e("span",{staticClass:"mr-1 font-weight-light"},[t._v(" "+t._s(t.$t("from"))+" ")]),t._v(" "),e(d.a,{staticClass:"ml-2",attrs:{src:t.bridge,"max-height":"23px","max-width":"20px"}}),t._v(" "),e("span",{staticClass:"ml-2 font-weight-500"},[t._v("\n              "+t._s(t.$t("mvm_mainnet"))+"\n            ")])],1),t._v(" "),e("div",{staticClass:"d-flex flex-row align-center"},[e(c.a,{ref:"form",model:{value:t.valueValid,callback:function(e){t.valueValid=e},expression:"valueValid"}},[e(x.a,{staticClass:"from-form my-3",attrs:{outlined:"",rules:t.rules,placeholder:"0.0","hide-details":"true"},model:{value:t.toAmount,callback:function(e){t.toAmount=e},expression:"toAmount"}})],1),t._v(" "),t.$vuetify.breakpoint.mobile?e(r.a,{staticClass:"select-token-btn px-1",attrs:{outlined:"",elevation:"0","min-height":"56px"},on:{click:function(e){e.stopPropagation(),t.selectTokenDialog=!0}}},[e(d.a,{staticClass:"mr-1 ml-1",attrs:{src:t.selectedToken.icon_url,"max-height":"24px","max-width":"24px"}}),t._v(" "),e("span",{staticStyle:{"font-size":"18px"}},[t._v("\n                "+t._s(t.selectedToken.symbol)+"\n              ")]),t._v(" "),e(l.a,{attrs:{small:""}},[t._v(" mdi-menu-down ")])],1):e(r.a,{staticClass:"select-token-btn",attrs:{outlined:"",elevation:"0","min-height":"56px"},on:{click:function(e){e.stopPropagation(),t.selectTokenDialog=!0}}},[e(d.a,{staticClass:"mr-3",attrs:{src:t.selectedToken.icon_url,"max-height":"24px","max-width":"24px"}}),t._v(" "),e("span",{staticClass:"mr-2",staticStyle:{"font-size":"18px"}},[t._v("\n                "+t._s(t.selectedToken.symbol)+"\n              ")]),t._v(" "),e(l.a,{attrs:{small:""}},[t._v(" mdi-menu-down ")])],1),t._v(" "),e("select-to-token")],1),t._v(" "),t.toBalanceVisble?e("div",[e("span",{staticClass:"font-weight-light"},[t._v("\n              "+t._s(t.$t("balance"))+": "+t._s(t.fixedToBalance)+"\n              "+t._s(t.selectedToken.symbol)+"\n            ")]),t._v(" "),e("a",{on:{click:t.setMaxAmount}},[e("span",{staticClass:"ml-1 max-text"},[t._v(" ("+t._s(t.$t("max"))+") ")])])]):t._e(),t._v(" "),t.fetchingBalance&&t.connected?e("div",[e(m.a,{staticClass:"mr-2",attrs:{width:"1",size:"10",indeterminate:"",color:"dark"}}),t._v(" "),e("span",{staticClass:"font-weight-light",staticStyle:{}},[t._v(t._s(t.$t("loading_balance")))])],1):t._e()])],1),t._v(" "),e(o.a,{staticClass:"text-center pa-0 py-1"},[e(r.a,{attrs:{icon:""},on:{click:function(e){t.mode=0}}},[e(l.a,{staticClass:"arrow-down py-1"},[t._v(" mdi-arrow-down ")])],1)],1),t._v(" "),e(o.a,{staticClass:"pa-0",staticStyle:{"font-size":"14px"}},[e(f.a,{staticClass:"px-5 py-4 border-rounded",staticStyle:{"background-color":"#f4f7fa"}},[e("div",{staticClass:"d-flex align-center mb-2"},[e("span",{staticClass:"font-weight-light"},[t._v(" "+t._s(t.$t("to"))+" ")]),t._v(" "),e(r.a,{staticClass:"px-0",attrs:{small:"",depressed:""},on:{click:function(e){e.stopPropagation(),t.selectNetworkDialog=!0}}},[e(d.a,{staticClass:"ml-3",attrs:{"max-width":"20px","max-height":"20px",src:t.selectedNetwork.icon_url}}),t._v(" "),e("span",{staticClass:"ml-2 selected-network font-weight-500"},[t._v("\n                "+t._s(t.selectedNetwork.name)+" "+t._s(t.$t("mainnet"))+"\n              ")]),t._v(" "),e(l.a,{attrs:{small:""}},[t._v(" mdi-menu-down ")])],1),t._v(" "),e("select-to-network")],1),t._v(" "),t.txGettingFee?e("div",{staticClass:"mb-2"},[e(m.a,{staticClass:"mr-2",attrs:{width:"1",size:"10",indeterminate:"",color:"dark"}}),t._v(" "),e("span",{staticClass:"font-weight-light",staticStyle:{}},[t._v(t._s(t.$t("loading_withdrawal_fee")))])],1):t._e(),t._v(" "),t.txEstimatedFeeVisible?e("div",{staticClass:"d-flex flex-column font-weight-light"},[e("span",{staticClass:"mb-2"},[t._v("\n              "+t._s(t.$t("withdrawal_fee"))+": "+t._s(t.txEstimatedFee)+"\n              "+t._s(t.selectedToken.symbol)+"\n            ")])]):t._e(),t._v(" "),e("div",{staticClass:"d-flex flex-column font-weight-light"},[e("span",{staticClass:"mb-2"},[t._v("\n              "+t._s(t.$t("transaction_gas"))+":  "+t._s(t.transactionGas)+" ETH\n            ")])]),t._v(" "),e("div",{staticClass:"d-flex flex-column font-weight-light"},[e("span",{staticClass:"mb-2"},[t._v("\n              "+t._s(t.$t("will_receive"))+": "+t._s(0!=t.toAmount?t.toAmount:0)+"\n              "+t._s(t.selectedToken.symbol)+"\n            ")])])])],1),t._v(" "),e(o.a,{staticClass:"mt-8 px-0"},[t.connected?t._e():e("connect-wallet",{attrs:{huge:!0}}),t._v(" "),t.connected?e(r.a,{staticClass:"border-rounded main-btn white--text",attrs:{block:"","x-large":"",depressed:"",elevation:"0",color:"#5959d8",loading:t.withdrawing,disabled:!t.valueValid},on:{click:t.withdraw}},[e("span",[t._v(" "+t._s(t.withdrawBtnText)+" ")])]):t._e(),t._v(" "),e("withdraw-dialog",{attrs:{"to-amount":t.toAmount,"total-amount":t.totalPayAmount,fee:t.txEstimatedFee}})],1)],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{SelectToToken:n(1405).default,SelectToNetwork:n(1406).default,ConnectWallet:n(224).default,WithdrawDialog:n(1407).default})}}]);