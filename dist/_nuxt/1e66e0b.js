(window.webpackJsonp=window.webpackJsonp||[]).push([[18,16,17],{1372:function(t,e,r){"use strict";r.r(e);var n=r(742),o=r(1342),c=r(1351),l=r(503),d=r(1341),x=r(128),f=r(1340),m=(r(532),r(23)),v=(r(111),r(63)),h=r(527),_=r(528),w={data:function(){return{addingToken:!1}},props:["link","assetid","symbol"],computed:{txSucceedDialog:{get:function(){return this.$store.state.txSucceedDialog},set:function(t){this.$store.commit("toggleTxSucceedDialog",t)}}},methods:{addToken:function(){var t=this;return Object(m.a)(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=window.ethereum){e.next=2;break}return e.abrupt("return");case 2:if(""!=t.assetid){e.next=4;break}return e.abrupt("return");case 4:if("43d61dcd-e413-450d-80b8-101d5e903357"!=t.assetid){e.next=6;break}return e.abrupt("return");case 6:return t.addingToken=!0,e.next=9,h.a.asset.fetch(t.assetid);case 9:return r=e.sent,e.next=12,Object(_.d)(t.assetid);case 12:if((n=e.sent)!==v.a.constants.AddressZero){e.next=15;break}return e.abrupt("return");case 15:return e.prev=15,e.next=18,window.ethereum.request({method:"wallet_watchAsset",params:{type:"ERC20",options:{address:n,symbol:r.symbol,decimals:8,image:r.icon_url}}});case 18:t.addingToken=!1,e.next=25;break;case 21:e.prev=21,e.t0=e.catch(15),console.log(e.t0),t.addingToken=!1;case 25:case"end":return e.stop()}}),e,null,[[15,21]])})))()}}},k=r(69),component=Object(k.a)(w,(function(){var t=this,e=t._self._c;return e(c.a,{staticClass:"dialog-css",attrs:{"max-width":"450px","overlay-opacity":"0.5"},model:{value:t.txSucceedDialog,callback:function(e){t.txSucceedDialog=e},expression:"txSucceedDialog"}},[e(x.a,{staticClass:"align-self-start px-9 py-6"},[e(d.a,{staticClass:"d-flex flex-column mb-0"},[e(o.a,{staticClass:"align-center d-flex flex-row pr-0 mb-2"},[e("h1",{staticClass:"title-css"},[t._v(t._s(t.$t("confirmed")))]),t._v(" "),e(f.a),t._v(" "),e(n.a,{attrs:{icon:""},on:{click:function(e){t.txSucceedDialog=!1}}},[e(l.a,[t._v(" mdi-close ")])],1)],1),t._v(" "),e(o.a,{staticClass:"d-flex justify-center my-2"},[e(l.a,{attrs:{size:"128px",color:"green"}},[t._v(" mdi-check-circle ")])],1),t._v(" "),e(o.a,{staticClass:"d-flex justify-center pt-0 pb-2"},[e("a",{staticStyle:{"text-decoration":"none"},attrs:{href:t.link,target:"_blank",click:"window.open(link)"}},[e("span",[t._v(" "+t._s(t.$t("view_on_explorer"))+" ")])])]),t._v(" "),t.symbol?e(o.a,{staticClass:"d-flex justify-center py-0"},[e(n.a,{staticClass:"my-3",attrs:{rounded:"",depressed:"",elevation:"0",color:"#f4f7fa",loading:t.addingToken},on:{click:t.addToken}},[t._v(" \n          "+t._s(t.$t("add"))+" "+t._s(t.symbol)+"\n        ")])],1):t._e(),t._v(" "),e(o.a,[e(n.a,{staticClass:"border-rounded main-btn white--text",attrs:{block:"","x-large":"",depressed:"",elevation:"0",color:"#5959d8"},on:{click:function(e){t.txSucceedDialog=!1}}},[t._v("\n          "+t._s(t.$t("close"))+"\n        ")])],1)],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports},1376:function(t,e){t.exports=function(){throw new Error("define cannot be used indirect")}},1383:function(t,e,r){"use strict";r.r(e);var n=r(742),o=r(1342),c=r(1351),l=r(503),d=r(1341),x=r(128),f=r(1340),m={props:["msg"],computed:{txFailedDialog:{get:function(){return this.$store.state.txFailedDialog},set:function(t){this.$store.commit("toggleTxFailedDialog",t)}}}},v=r(69),component=Object(v.a)(m,(function(){var t=this,e=t._self._c;return e(c.a,{staticClass:"dialog-css",attrs:{"max-width":"450px","overlay-opacity":"0.8"},model:{value:t.txFailedDialog,callback:function(e){t.txFailedDialog=e},expression:"txFailedDialog"}},[e(x.a,{staticClass:"align-self-start px-9 py-8",attrs:{"max-height":"450px"}},[e(d.a,{staticClass:"d-flex flex-column mb-0"},[e(o.a,{staticClass:"align-center d-flex flex-row pr-0 mb-2"},[e("h1",{staticClass:"title-css"},[t._v(t._s(t.$t("transaction_failed")))]),t._v(" "),e(f.a),t._v(" "),e(n.a,{attrs:{icon:""},on:{click:function(e){t.txFailedDialog=!1}}},[e(l.a,[t._v(" mdi-close ")])],1)],1),t._v(" "),e(o.a,{staticClass:"d-flex justify-center my-1"},[e(l.a,{attrs:{size:"128px",color:"red"}},[t._v(" \n          mdi-alert-circle-outline\n        ")])],1),t._v(" "),e(o.a,{staticClass:"d-flex justify-center"},[t.msg?e("span",[t._v("  "+t._s(t.msg)+"  ")]):t._e()]),t._v(" "),e(o.a,[e(n.a,{staticClass:"border-rounded main-btn white--text",attrs:{block:"","x-large":"",depressed:"",elevation:"0",color:"#5959d8"},on:{click:function(e){t.txFailedDialog=!1}}},[t._v("\n          "+t._s(t.$t("close"))+"\n        ")])],1)],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports},1386:function(t,e,r){var content=r(1414);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(36).default)("5cf224cd",content,!0,{sourceMap:!1})},1389:function(t,e,r){t.exports=r.p+"img/metamask.93aa2ba.png"},1407:function(t,e,r){"use strict";r.r(e);var n=r(742),o=r(1342),c=r(1351),l=r(503),d=r(393),x=r(1341),f=r(128),m=r(1340),v=r(1286),h=(r(58),r(23)),_=(r(111),r(70),r(93),r(141),r(790),r(50),r(63)),w=r(2099),k=r(527),y=r(160),C=r(533),T=r(534),D=r(1389),$=r.n(D),S=r(394),j=r(528),O=r(1372),M="c94ac88f-4671-3976-b60a-09064f1811e8",A="43d61dcd-e413-450d-80b8-101d5e903357",W="https://scan.mvm.dev/";function E(t,e){return e===A?_.a.utils.parseEther(Number(t).toFixed(8)):Object(w.c)(Object(w.b)(t,j.a))}var R={components:{txConfirmed:O.default},data:function(){return{MetamaskLogo:$.a,search:"",txAddress:"",txMemo:"",txType1Sent:!1,txType2Sent:!1,txConfirmed:!1,txSucceed:!1,txExplorerURL:"",txErrorText:""}},props:["toAmount","totalAmount","fee"],computed:{confirmWithdrawDialog:{get:function(){return this.$store.state.confirmWithdrawDialog},set:function(t){this.$store.commit("toggleConfirmWithdraw",t)}},txSucceedDialog:{get:function(){return this.$store.state.txSucceedDialog},set:function(t){this.$store.commit("toggleTxSucceedDialog",t)}},txFailedDialog:{get:function(){return this.$store.state.txFailedDialog},set:function(t){this.$store.commit("toggleTxFailedDialog",t)}},selectedNetwork:{get:function(){return this.$store.state.toNetwork}},selectedToken:{get:function(){return this.$store.state.toToken}},userAddress:function(){return this.$store.state.userAddress},txSupportMetamask:function(){return this.$store.state.supportMetamaskNetworks.includes(this.selectedNetwork.symbol)},txToMixin:function(){return this.selectedNetwork.asset_id===M},inputPlaceHolder:function(){return[this.txToMixin?this.$t("please_enter_recipient_user_id"):this.$t("please_enter_your_wallet_address"),this.$t("optional")]}},methods:{withdraw:function(t){var e=this;return Object(h.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,e.selectedNetwork.asset_id!=M){r.next=9;break}return e.txType1Sent=!0,r.next=5,e.mixinWithdraw();case 5:return e.txType1Sent=!1,e.confirmWithdrawDialog=!1,e.txSucceedDialog=!0,r.abrupt("return");case 9:if("metamask"!=t){r.next=17;break}return e.txType2Sent=!0,r.next=13,e.externalWithdraw("metamask");case 13:return e.txType2Sent=!1,e.confirmWithdrawDialog=!1,e.txSucceedDialog=!0,r.abrupt("return");case 17:return e.txType1Sent=!0,r.next=20,e.externalWithdraw("");case 20:e.txType1Sent=!1,e.confirmWithdrawDialog=!1,e.txSucceedDialog=!0,r.next=33;break;case 25:r.prev=25,r.t0=r.catch(0),console.log(r.t0),e.txType1Sent=!1,e.txType2Sent=!1,e.confirmWithdrawDialog=!1,e.txErrorText=r.t0,e.txFailedDialog=!0;case 33:case"end":return r.stop()}}),r,null,[[0,25]])})))()},mixinWithdraw:function(){var t=this;return Object(h.a)(regeneratorRuntime.mark((function e(){var r,n,o,c,l,d,x,f,m,v,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(y.b)(),n=r.connectedWallet,o=new _.a.providers.Web3Provider(n.value.provider,"any"),c=o.getSigner(),e.next=5,t.getMixinExtra(t.txAddress,t.txMemo);case 5:if(void 0!==(l=e.sent)){e.next=8;break}throw new Error("Failed to get Mixin user");case 8:return d=E(t.toAmount,t.selectedToken.asset_id),e.next=11,Object(j.f)(t.userAddress);case 11:if(x=e.sent,t.selectedToken.asset_id!==A){e.next=19;break}return m=new _.a.Contract(j.b,T,c),e.next=16,m.release(x,l,{value:d,gasPrice:1e7,gasLimit:35e4});case 16:f=e.sent,e.next=26;break;case 19:return e.next=21,Object(j.d)(t.selectedToken.asset_id);case 21:return v=e.sent,h=new _.a.Contract(v,C,c),e.next=25,h.transferWithExtra(x,d,l,{gasPrice:1e7});case 25:f=e.sent;case 26:t.txExplorerURL=W+"tx/"+f.hash;case 27:case"end":return e.stop()}}),e)})))()},externalWithdraw:function(t){var e=this;return Object(h.a)(regeneratorRuntime.mark((function r(){var n,o,c,l,d,x,f,m,v,h,w,k;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n=Object(y.b)(),o=n.connectedWallet,c=new _.a.providers.Web3Provider(o.value.provider,"any"),l=c.getSigner(),"metamask"!=t){r.next=9;break}return r.next=6,l.getAddress();case 6:r.t0=r.sent,r.next=10;break;case 9:r.t0=e.txAddress;case 10:return d=r.t0,r.next=13,e.getExternalExtra(d,e.txMemo,e.toAmount);case 13:return x=r.sent,f=E(e.totalAmount,e.selectedToken.asset_id),r.next=17,Object(j.f)(e.userAddress);case 17:if(m=r.sent,e.selectedToken.asset_id!==A){r.next=27;break}return h=new _.a.Contract(j.b,T,l),r.next=22,h.release(m,x,{value:f,gasPrice:1e7,gasLimit:35e4});case 22:v=r.sent,console.log(v),e.txExplorerURL=W+"tx/"+v.hash,r.next=36;break;case 27:return r.next=29,Object(j.d)(e.selectedToken.asset_id);case 29:return w=r.sent,k=new _.a.Contract(w,C,l),r.next=33,k.transferWithExtra(m,f,x,{gasPrice:1e7});case 33:v=r.sent,console.log(v),e.txExplorerURL=W+"tx/"+v.hash;case 36:case"end":return r.stop()}}),r)})))()},getMixinExtra:function(t,e){return Object(h.a)(regeneratorRuntime.mark((function r(){var n,o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n=String(t).trim(),Object(S.a)(n)){r.next=7;break}return r.next=4,k.a.user.fetch(n);case 4:o=r.sent,console.log(o),n=o.user_id;case 7:if(void 0!==n){r.next=9;break}return r.abrupt("return",void 0);case 9:return r.abrupt("return","0x"+Object(j.e)(n,e));case 10:case"end":return r.stop()}}),r)})))()},getExternalExtra:function(t,e,r){var n=this;return Object(h.a)(regeneratorRuntime.mark((function o(){var c,l,d;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return c=JSON.stringify({t:t,m:e,a:r}),l={receivers:["a13f4c77-5cfc-4368-a2d6-33f07037ae9e"],threshold:1,extra:btoa(c)},console.log(l,c),o.next=5,n.$axios.post("https://bridge.mvm.dev/extra",l);case 5:return d=o.sent,o.abrupt("return","0x"+d.data.extra);case 7:case"end":return o.stop()}}),o)})))()}}},F=(r(1413),r(69)),component=Object(F.a)(R,(function(){var t=this,e=t._self._c;return e(c.a,{staticClass:"dialog-css",attrs:{"max-width":"500px","overlay-opacity":"0.95"},model:{value:t.confirmWithdrawDialog,callback:function(e){t.confirmWithdrawDialog=e},expression:"confirmWithdrawDialog"}},[e(f.a,{staticClass:"align-self-start px-9 py-8"},[e(x.a,{staticClass:"d-flex flex-column mb-0"},[e(o.a,{staticClass:"align-center d-flex flex-row pr-0 mb-2"},[e("h1",{staticClass:"title-css"},[t._v(t._s(t.$t("confirm_withdraw")))]),t._v(" "),e(m.a),t._v(" "),e(n.a,{attrs:{icon:""},on:{click:function(e){t.confirmWithdrawDialog=!1}}},[e(l.a,[t._v(" mdi-close ")])],1)],1),t._v(" "),e(o.a,[e("div",{staticClass:"py-0"},[e("div",[e("span",{staticClass:"subtitle-css"},[t._v(" "+t._s(t.$t("to"))+" ")]),t._v(" "),e("div",{staticClass:"d-flex flex-row align-center pt-1 mb-5"},[e(d.a,{staticClass:"mr-2",attrs:{src:t.selectedNetwork.icon_url,"max-height":"20px","max-width":"20px"}}),t._v(" "),e("span",{staticClass:"main-title-css"},[t._v("\n                "+t._s(t.selectedNetwork.name)+" "+t._s(t.$t("mainnet"))+"\n              ")])],1)])]),t._v(" "),e("div",{staticClass:"py-0"},[e("div",[e("span",{staticClass:"subtitle-css"},[t._v(" "+t._s(t.$t("token"))+" ")]),t._v(" "),e("div",{staticClass:"d-flex flex-row align-center pt-1 mb-5"},[e(d.a,{staticClass:"mr-2",attrs:{src:t.selectedToken.icon_url,"max-height":"20px","max-width":"20px"}}),t._v(" "),e("span",{staticClass:"main-title-css"},[t._v("\n                "+t._s(t.totalAmount)+" "+t._s(t.selectedToken.symbol)+"\n              ")])],1)])]),t._v(" "),t.txToMixin?e("div",{staticClass:"d-flex flex-column mb-2"},[e("span",{staticClass:"subtitle-css"},[t._v("\n            "+t._s(t.$t("user_id"))+"\n          ")]),t._v(" "),e(v.a,{staticClass:"my-3 withdraw-addr",attrs:{rounded:"",clearable:"","hide-details":"true",placeholder:t.inputPlaceHolder[0]},model:{value:t.txAddress,callback:function(e){t.txAddress=e},expression:"txAddress"}}),t._v(" "),e("span",{staticClass:"subtitle-css"},[t._v(" "+t._s(t.$t("memo"))+" ")]),t._v(" "),e(v.a,{staticClass:"my-3 withdraw-addr",attrs:{rounded:"",clearable:"","hide-details":"true",placeholder:t.inputPlaceHolder[1]},model:{value:t.txMemo,callback:function(e){t.txMemo=e},expression:"txMemo"}})],1):e("div",{staticClass:"d-flex flex-column mb-2"},[e("span",{staticClass:"subtitle-css"},[t._v("\n            "+t._s(t.$t("address"))+"\n          ")]),t._v(" "),e(v.a,{staticClass:"my-3 withdraw-addr",attrs:{rounded:"",clearable:"","hide-details":"true",placeholder:t.inputPlaceHolder[0]},model:{value:t.txAddress,callback:function(e){t.txAddress=e},expression:"txAddress"}}),t._v(" "),e("span",{staticClass:"subtitle-css"},[t._v(" "+t._s(t.$t("memo"))+" ")]),t._v(" "),e(v.a,{staticClass:"my-3 withdraw-addr",attrs:{rounded:"",clearable:"","hide-details":"true",placeholder:t.inputPlaceHolder[1]},model:{value:t.txMemo,callback:function(e){t.txMemo=e},expression:"txMemo"}})],1)]),t._v(" "),e(o.a,[e(n.a,{staticClass:"deposit-btn mt-2",attrs:{block:"","x-large":"",elevation:"0",loading:t.txType1Sent},on:{click:t.withdraw}},[t.txToMixin?e("span",[t._v(" "+t._s(t.$t("withdraw_to_mixin")))]):e("span",[t._v(" "+t._s(t.$t("withdraw_to_address")))])]),t._v(" "),t.txSupportMetamask?e(n.a,{staticClass:"metamask-pay-btn mt-4",attrs:{block:"","x-large":"",elevation:"0",loading:t.txType2Sent},on:{click:function(e){return t.withdraw("metamask")}}},[e("span",{staticClass:"ml-1"},[t._v(" "+t._s(t.$t("withdraw_to_current_wallet")))])]):t._e()],1)],1),t._v(" "),e("tx-confirmed",{attrs:{link:t.txExplorerURL}}),t._v(" "),e("tx-failed",{attrs:{msg:t.txErrorText}})],1)],1)}),[],!1,null,"1cf79746",null);e.default=component.exports;installComponents(component,{TxConfirmed:r(1372).default,TxFailed:r(1383).default})},1413:function(t,e,r){"use strict";r(1386)},1414:function(t,e,r){var n=r(35)(!1);n.push([t.i,".dialog-css[data-v-1cf79746]{width:400px;max-width:400px;min-height:64px}.title-css[data-v-1cf79746]{font-size:24px;font-weight:600;font-style:italic}.subtitle-css[data-v-1cf79746]{font-size:14px;font-weight:400}.main-title-css[data-v-1cf79746]{font-size:18px;font-weight:500;word-break:break-all}.deposit-btn[data-v-1cf79746]{color:#fff!important;font-weight:600;background-color:#5959d8!important}.deposit-btn[data-v-1cf79746],.qr-area[data-v-1cf79746]{border-radius:10px!important}.qr-area[data-v-1cf79746]{background-color:#f4f7fa}.help-text[data-v-1cf79746]{word-wrap:break-word}.withdraw-addr[data-v-1cf79746]{height:55px;border-radius:10px;background-color:#f4f7fa}.metamask-pay-btn[data-v-1cf79746]{color:#fff;font-weight:600;background-color:#2979ff!important;border-radius:10px}",""]),t.exports=n},1457:function(t,e){function r(){return t.exports=r=Object.assign?Object.assign.bind():function(t){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var e in source)Object.prototype.hasOwnProperty.call(source,e)&&(t[e]=source[e])}return t},t.exports.__esModule=!0,t.exports.default=t.exports,r.apply(this,arguments)}t.exports=r,t.exports.__esModule=!0,t.exports.default=t.exports},1605:function(t,e){},1606:function(t,e){t.exports=function(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t},t.exports.__esModule=!0,t.exports.default=t.exports}}]);