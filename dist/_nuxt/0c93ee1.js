(window.webpackJsonp=window.webpackJsonp||[]).push([[10,18,19],{1410:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"d",(function(){return o})),n.d(e,"b",(function(){return c})),n.d(e,"c",(function(){return l}));var r="c6d0c728-2624-429b-8e0d-d9d19b6592fa",o="c94ac88f-4671-3976-b60a-09064f1811e8",c="43d61dcd-e413-450d-80b8-101d5e903357",l=.001},1418:function(t,e,n){"use strict";n.r(e);var r=n(785),o=n(1387),c=n(1397),l=n(539),d=n(1386),m=n(135),f=n(1385),x=(n(569),n(21)),h=(n(120),n(64)),_=n(565),y=n(564),v=n(1410),k={data:function(){return{addingToken:!1}},props:["link","assetid","symbol"],computed:{txSucceedDialog:{get:function(){return this.$store.state.txSucceedDialog},set:function(t){this.$store.commit("toggleTxSucceedDialog",t)}}},methods:{addToken:function(){var t=this;return Object(x.a)(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=window.ethereum){e.next=2;break}return e.abrupt("return");case 2:if(""!=t.assetid){e.next=4;break}return e.abrupt("return");case 4:if(t.assetid!=v.b){e.next=6;break}return e.abrupt("return");case 6:return t.addingToken=!0,e.next=9,_.a.asset.fetch(t.assetid);case 9:return n=e.sent,e.next=12,Object(y.d)(t.assetid);case 12:if((r=e.sent)!==h.a.constants.AddressZero){e.next=15;break}return e.abrupt("return");case 15:return e.prev=15,e.next=18,window.ethereum.request({method:"wallet_watchAsset",params:{type:"ERC20",options:{address:r,symbol:n.symbol,decimals:8,image:n.icon_url}}});case 18:t.addingToken=!1,e.next=25;break;case 21:e.prev=21,e.t0=e.catch(15),console.log(e.t0),t.addingToken=!1;case 25:case"end":return e.stop()}}),e,null,[[15,21]])})))()}}},w=n(57),component=Object(w.a)(k,(function(){var t=this,e=t._self._c;return e(c.a,{staticClass:"dialog-css",attrs:{"max-width":"450px","overlay-opacity":"0.5"},model:{value:t.txSucceedDialog,callback:function(e){t.txSucceedDialog=e},expression:"txSucceedDialog"}},[e(m.a,{staticClass:"align-self-start px-9 py-6"},[e(d.a,{staticClass:"d-flex flex-column mb-0"},[e(o.a,{staticClass:"align-center d-flex flex-row pr-0 mb-2"},[e("h1",{staticClass:"title-css"},[t._v(t._s(t.$t("confirmed")))]),t._v(" "),e(f.a),t._v(" "),e(r.a,{attrs:{icon:""},on:{click:function(e){t.txSucceedDialog=!1}}},[e(l.a,[t._v(" mdi-close ")])],1)],1),t._v(" "),e(o.a,{staticClass:"d-flex justify-center my-2"},[e(l.a,{attrs:{size:"128px",color:"green"}},[t._v(" mdi-check-circle ")])],1),t._v(" "),e(o.a,{staticClass:"d-flex justify-center pt-0 pb-2"},[e("a",{staticStyle:{"text-decoration":"none"},attrs:{href:t.link,target:"_blank",click:"window.open(link)"}},[e("span",[t._v(" "+t._s(t.$t("view_on_explorer"))+" ")])])]),t._v(" "),t.symbol?e(o.a,{staticClass:"d-flex justify-center py-0"},[e(r.a,{staticClass:"my-3",attrs:{rounded:"",depressed:"",elevation:"0",color:"#f4f7fa",loading:t.addingToken},on:{click:t.addToken}},[t._v(" \n          "+t._s(t.$t("add"))+" "+t._s(t.symbol)+"\n        ")])],1):t._e(),t._v(" "),e(o.a,[e(r.a,{staticClass:"border-rounded main-btn white--text",attrs:{block:"","x-large":"",depressed:"",elevation:"0",color:"#5959d8"},on:{click:function(e){t.txSucceedDialog=!1}}},[t._v("\n          "+t._s(t.$t("close"))+"\n        ")])],1)],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports},1426:function(t,e,n){"use strict";n.r(e);var r=n(785),o=n(1387),c=n(1397),l=n(539),d=n(1386),m=n(135),f=n(1385),x={props:["msg"],computed:{txFailedDialog:{get:function(){return this.$store.state.txFailedDialog},set:function(t){this.$store.commit("toggleTxFailedDialog",t)}}}},h=n(57),component=Object(h.a)(x,(function(){var t=this,e=t._self._c;return e(c.a,{staticClass:"dialog-css",attrs:{"max-width":"450px","overlay-opacity":"0.8"},model:{value:t.txFailedDialog,callback:function(e){t.txFailedDialog=e},expression:"txFailedDialog"}},[e(m.a,{staticClass:"align-self-start px-9 py-8",attrs:{"max-height":"500px"}},[e(d.a,{staticClass:"d-flex flex-column mb-0"},[e(o.a,{staticClass:"align-center d-flex flex-row pr-0 mb-2"},[e("h1",{staticClass:"title-css"},[t._v(t._s(t.$t("transaction_failed")))]),t._v(" "),e(f.a),t._v(" "),e(r.a,{attrs:{icon:""},on:{click:function(e){t.txFailedDialog=!1}}},[e(l.a,[t._v(" mdi-close ")])],1)],1),t._v(" "),e(o.a,{staticClass:"d-flex justify-center my-1"},[e(l.a,{attrs:{size:"128px",color:"red"}},[t._v(" \n          mdi-alert-circle-outline\n        ")])],1),t._v(" "),e(o.a,{staticClass:"d-flex justify-center break-all"},[t.msg?e("span",[t._v("  "+t._s(t.msg.message?t.msg.message:t.msg)+"  ")]):t._e()]),t._v(" "),e(o.a,[e(r.a,{staticClass:"border-rounded main-btn white--text",attrs:{block:"","x-large":"",depressed:"",elevation:"0",color:"#5959d8"},on:{click:function(e){t.txFailedDialog=!1}}},[t._v("\n          "+t._s(t.$t("close"))+"\n        ")])],1)],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports},1432:function(t,e,n){t.exports=n.p+"img/metamask.93aa2ba.png"},1440:function(t,e,n){var content=n(1476);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(39).default)("6582080a",content,!0,{sourceMap:!1})},1455:function(t){t.exports=JSON.parse('[{"constant":true,"inputs":[],"name":"name","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_spender","type":"address"},{"name":"_value","type":"uint256"}],"name":"approve","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"totalSupply","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_from","type":"address"},{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transferFrom","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"decimals","outputs":[{"name":"","type":"uint8"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_owner","type":"address"}],"name":"balanceOf","outputs":[{"name":"balance","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"symbol","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transfer","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"_owner","type":"address"},{"name":"_spender","type":"address"}],"name":"allowance","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"payable":true,"stateMutability":"payable","type":"fallback"},{"anonymous":false,"inputs":[{"indexed":true,"name":"owner","type":"address"},{"indexed":true,"name":"spender","type":"address"},{"indexed":false,"name":"value","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"from","type":"address"},{"indexed":true,"name":"to","type":"address"},{"indexed":false,"name":"value","type":"uint256"}],"name":"Transfer","type":"event"}]')},1467:function(t,e,n){"use strict";n.r(e);var r=n(785),o=n(1387),c=n(1397),l=n(539),d=n(423),m=n(1386),f=n(135),x=n(1385),h=(n(62),n(21)),_=(n(120),n(74),n(100),n(65),n(12),n(106),n(64)),y=n(189),v=n(1455),k=n(170),w=n(1431),C=n.n(w),D=n(1432),S=n.n(D),T=n(564),$=n(565),R=n(1410),A="https://etherscan.io/",Q=Object(y.a)(),j={data:function(){return{search:"",MetamaskLogo:S.a,txShowQR:!1,txQrBtnText:this.$t("show_qrcode"),txSent:!1,txExplorerURL:""}},components:{VueQrcode:C.a},props:["fromAmount","fromBalance"],computed:{confirmDepositDialog:{get:function(){return this.$store.state.confirmDepositDialog},set:function(t){this.txShowQR=!1,this.txQrBtnText=this.$t("show_qrcode"),this.$store.commit("toggleConfirmDeposit",t)}},txSucceedDialog:{get:function(){return this.$store.state.txSucceedDialog},set:function(t){this.$store.commit("toggleTxSucceedDialog",t)}},txFailedDialog:{get:function(){return this.$store.state.txFailedDialog},set:function(t){this.$store.commit("toggleTxFailedDialog",t)}},selectedNetwork:{get:function(){return this.$store.state.fromNetwork}},selectedToken:{get:function(){return this.$store.state.fromToken}},connectedChain:function(){return this.$store.state.chainId},depositAddr:{get:function(){return this.$store.state.depositAddr}},supportsMetamask:{get:function(){return!!this.$store.state.supportMetamaskNetworks.includes(this.selectedNetwork.symbol)&&(!(this.fromBalance<this.fromAmount)&&this.selectedNetwork.evm_chain_id==this.$store.state.chainId)}},userAddress:function(){return this.$store.state.userAddress},txQrHelpText:{get:function(){return this.selectedNetwork.asset_id==R.d?this.$t("please_scan_qr_with_your_mixin_messenger"):this.selectedNetwork.asset_id!=R.d?this.$t("please_transfer_to_this_address_from_your_wallet"):void 0}},txQrUrl:{get:function(){return this.selectedNetwork.asset_id==R.d?this.createMixinPayment():this.selectedNetwork.asset_id!=R.d?this.depositAddr[0]:void 0}},rows:{get:function(){return[{subtitle:this.$t("from"),haveIcon:!0,icon:this.selectedNetwork.icon_url,addtoken:!1,copyable:!1,name:this.selectedNetwork.name+" Mainnet"},{subtitle:this.$t("token"),haveIcon:!0,icon:this.selectedToken.icon_url,addtoken:"0x120C7"===this.connectedChain,copyable:!1,name:this.selectedToken.symbol},{subtitle:this.$t("amount"),haveIcon:!1,icon:"",addtoken:!1,copyable:!1,name:this.fromAmount+" "+this.selectedToken.symbol},{subtitle:this.$t("address"),haveIcon:!1,icon:"",addtoken:!1,copyable:!0,name:this.selectedNetwork.asset_id==R.d?"":this.depositAddr[0]},{subtitle:this.$t("memo"),haveIcon:!1,icon:"",addtoken:!1,copyable:!0,name:this.selectedNetwork.asset_id==R.d?"":this.depositAddr[1]?this.depositAddr[1]:""}]}}},methods:{toggleQR:function(){this.txShowQR=!this.txShowQR,this.selectedNetwork.asset_id==R.d&&this.getPaymentState(),1==this.txShowQR&&(this.txQrBtnText=this.$t("hide_qrcode")),0==this.txShowQR&&(this.txQrBtnText=this.$t("show_qrcode"))},createMixinPayment:function(){var t=JSON.parse(localStorage.getItem("user"));return"mixin://pay?recipient=".concat(t.client_id,"&asset=").concat(this.selectedToken.asset_id,"&amount=").concat(this.fromAmount,"&trace=").concat(Q)},redirect:function(t){location.href=t,this.getPaymentState(1)},getPaymentState:function(t){var e=this;return Object(h.a)(regeneratorRuntime.mark((function n(){var r,o,c;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(0!==t){n.next=4;break}if(e.txShowQR){n.next=4;break}return n.abrupt("return");case 4:if(0!=e.confirmDepositDialog){n.next=6;break}return n.abrupt("return");case 6:if(null!=e.txQrUrl){n.next=8;break}return n.abrupt("return");case 8:return r=JSON.parse(localStorage.getItem("user")),o=Object($.b)(r.client_id,r.session_id,r.private_key),n.next=12,o.transfer.fetch(Q).catch((function(t){console.log("Trace ID not found")}));case 12:if(c=n.sent,console.log(c),"transfer"!=c.type){n.next=21;break}return e.confirmDepositDialog=!1,e.txSucceedDialog=!0,e.txExplorerURL="https://scan.mvm.dev/address/"+e.userAddress+"/token-transfers",Q=Object(y.a)(),e.txShowQR=!1,n.abrupt("return");case 21:return n.next=23,new Promise((function(t){return setTimeout(t,1e3)}));case 23:n.next=0;break;case 25:case"end":return n.stop()}}),n)})))()},addToken:function(){var t=this;return Object(h.a)(regeneratorRuntime.mark((function e(){var n,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=window.ethereum){e.next=2;break}return e.abrupt("return");case 2:if((n=t.selectedToken.asset_id)!=R.b){e.next=5;break}return e.abrupt("return");case 5:return e.prev=5,e.next=8,$.a.asset.fetch(n);case 8:return r=e.sent,e.next=11,Object(T.d)(n);case 11:if((o=e.sent)!==_.a.constants.AddressZero){e.next=14;break}return e.abrupt("return");case 14:return e.next=16,window.ethereum.request({method:"wallet_watchAsset",params:{type:"ERC20",options:{address:o,symbol:r.symbol,decimals:8,image:r.icon_url}}});case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(5),console.log(e.t0);case 21:case"end":return e.stop()}}),e,null,[[5,18]])})))()},copyAddr:function(t){navigator.clipboard.writeText(t)},deposit:function(){var t=this;return Object(h.a)(regeneratorRuntime.mark((function e(){var n,r,o,c,l,d,m,f,x,h,y,w;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t.supportsMetamask){e.next=39;break}if(t.txSent=!0,t.selectedToken.asset_key.includes("0x")){e.next=5;break}return e.abrupt("return");case 5:if(n=Object(k.b)(),r=n.connectedWallet,o=new _.a.providers.Web3Provider(r.value.provider,"any"),c=o.getSigner(),"ETH"!==t.selectedToken.symbol){e.next=27;break}return l=_.a.utils.parseEther(t.fromAmount),e.t0=_.a.utils,e.next=13,c.getAddress();case 13:return e.t1=e.sent,e.t2=e.t0.getAddress.call(e.t0,e.t1),e.t3=t.depositAddr[0],e.t4=l,d={from:e.t2,to:e.t3,value:e.t4,chainId:1},e.next=20,o.getSigner().sendTransaction(d);case 20:return m=e.sent,console.log(m),t.txExplorerURL=A+"tx/"+m.hash,t.txSent=!1,t.confirmDepositDialog=!1,t.txSucceedDialog=!0,e.abrupt("return");case 27:if(t.selectedToken.chain_id!==R.b){e.next=39;break}return f=new _.a.Contract(t.selectedToken.asset_key,v,o),x=f.connect(c),e.next=32,f.decimals();case 32:return h=e.sent,y=_.a.utils.parseUnits(t.fromAmount,h),e.next=36,x.transfer(t.depositAddr[0],y);case 36:w=e.sent,console.log(w),t.txExplorerURL=A+"tx/"+w.hash;case 39:t.txSent=!1,t.confirmDepositDialog=!1,t.txSucceedDialog=!0,e.next=50;break;case 44:e.prev=44,e.t5=e.catch(0),t.txSent=!1,t.confirmDepositDialog=!1,t.txFailedDialog=!0,console.log(e.t5);case 50:case"end":return e.stop()}}),e,null,[[0,44]])})))()}}},M=(n(1475),n(57)),component=Object(M.a)(j,(function(){var t=this,e=t._self._c;return e(c.a,{staticClass:"dialog-css",attrs:{"max-width":"520px","overlay-opacity":"0.95"},model:{value:t.confirmDepositDialog,callback:function(e){t.confirmDepositDialog=e},expression:"confirmDepositDialog"}},[e(f.a,{staticClass:"align-self-start px-9 py-8"},[e(m.a,{staticClass:"d-flex flex-column mb-0"},[e(o.a,{staticClass:"align-center d-flex flex-row pr-0 mb-2"},[e("h1",{staticClass:"title-css"},[t._v(t._s(t.$t("confirm_deposit")))]),t._v(" "),e(x.a),t._v(" "),e(r.a,{attrs:{icon:""},on:{click:function(e){t.confirmDepositDialog=!1}}},[e(l.a,[t._v(" mdi-close ")])],1)],1),t._v(" "),t._l(t.rows,(function(n,i){return e(o.a,{key:i,staticClass:"py-0"},[n.name?e("span",{staticClass:"subtitle-css"},[t._v("\n          "+t._s(n.subtitle)+"\n        ")]):t._e(),t._v(" "),n.name?e("div",{staticClass:"d-flex flex-row align-center pt-1 mb-5"},[n.haveIcon?e(d.a,{staticClass:"mr-2",attrs:{src:n.icon,"max-height":"16px","max-width":"16px"}}):t._e(),t._v(" "),e("span",{staticClass:"main-title-css"},[t._v("\n            "+t._s(n.name)+"\n          ")]),t._v(" "),n.addtoken?e(l.a,{staticClass:"ml-1",attrs:{size:"14px"},on:{click:t.addToken}},[t._v("\n            mdi-plus\n          ")]):t._e(),t._v(" "),n.copyable?e(l.a,{staticClass:"ml-1",attrs:{size:"14px"},on:{click:function(e){return t.copyAddr(n.name)}}},[t._v("\n            mdi-content-copy\n          ")]):t._e()],1):t._e()])})),t._v(" "),e(o.a,[e(r.a,{staticClass:"deposit-btn mt-2",attrs:{block:"","x-large":"",elevation:"0"},on:{click:t.toggleQR}},[t._v("\n          "+t._s(t.txQrBtnText)+"\n        ")]),t._v(" "),t.supportsMetamask?e(r.a,{staticClass:"metamask-pay-btn mt-3",attrs:{block:"","x-large":"",elevation:"0",loading:t.txSent},on:{click:t.deposit}},[e("span",{staticClass:"ml-1"},[t._v(" "+t._s(t.$t("transfer_with_current_wallet")))])]):t._e(),t._v(" "),t.$vuetify.breakpoint.mobile&&"XIN"===t.selectedNetwork.symbol?e(r.a,{staticClass:"deposit-btn mt-3",attrs:{block:"","x-large":"",elevation:"0"},on:{click:function(e){t.redirect(t.createMixinPayment())}}},[t._v("\n          "+t._s(t.$t("pay_with_mixin_messenger"))+"\n        ")]):t._e(),t._v(" "),t.txShowQR&&t.$vuetify.breakpoint.mobile?e("div",{staticClass:"d-flex flex-column justify-center mt-5 pa-4 align-center qr-area"},[e(o.a,{staticClass:"d-flex justify-center"},[e("vue-qrcode",{staticClass:"mr-1",attrs:{value:t.txQrUrl,options:{margin:0,width:100}}})],1),t._v(" "),e(o.a,{staticClass:"d-flex justify-center"},[e("span",{staticClass:"font-weight-light help-text"},[t._v("\n              "+t._s(t.txQrHelpText)+"\n            ")])])],1):t._e(),t._v(" "),t.txShowQR&&!t.$vuetify.breakpoint.mobile?e("div",{staticClass:"d-flex justify-center mt-5 pa-4 align-center qr-area"},[e(o.a,{staticClass:"d-flex flex-grow-1"},[e("span",{staticClass:"font-weight-light help-text"},[t._v("\n              "+t._s(t.txQrHelpText)+"\n            ")])]),t._v(" "),e(o.a,{staticClass:"d-flex flex-grow-0"},[e("vue-qrcode",{staticClass:"mr-1",attrs:{value:t.txQrUrl,options:{margin:0,width:100}}})],1)],1):t._e()],1)],2),t._v(" "),e("tx-confirmed",{attrs:{link:t.txExplorerURL}}),t._v(" "),e("tx-failed")],1)],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{TxConfirmed:n(1418).default,TxFailed:n(1426).default})},1475:function(t,e,n){"use strict";n(1440)},1476:function(t,e,n){var r=n(38)(!1);r.push([t.i,".dialog-css{width:410px;max-width:410px;min-height:64px}.title-css{font-size:24px;font-weight:600;font-style:italic}.subtitle-css{font-size:14px;font-weight:400}.main-title-css{font-size:18px;font-weight:500;word-break:break-all}.deposit-btn{border-radius:10px!important;background-color:#5959d8!important}.deposit-btn,.metamask-pay-btn{color:#fff!important;font-weight:600}.metamask-pay-btn{background-color:#2979ff!important;border-radius:10px}.qr-area{background-color:#f4f7fa;border-radius:10px!important}.help-text{word-wrap:break-word}",""]),t.exports=r}}]);